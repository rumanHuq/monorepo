type LastPosition {
  lat: Float
  lng: Float
  orientation: Float
}

type User @entity(embedded: true) {
  _id: String! @id
  fbid: String @column
  email: String @column
  verifiedEmail: Boolean! @column
  name: String! @column
  age: Int @column
  password: String @column
  phoneNumber: String @column
  verifiedPhoneNumber: Boolean! @column
  profilePhoto: String @column
  isDriving: Boolean! @column
  isRiding: Boolean! @column
  isTaken: Boolean! @column
  lastPosition: LastPosition @column
  createdAt: String! @column(overrideType: "Date")
  updatedAt: String! @column(overrideType: "Date")
  chat: Chat @embedded
  messages: [Message] @embedded
  # verifications: [Verification] @embedded
  ridesAsPassenger: [Ride] @embedded
  ridesAsDriver: [Ride] @embedded
}

input fbConnectInput {
  name: String!
  email: String
  fbid: String!
}

extend type Mutation {
  USER_FB_CONNECT(input: fbConnectInput): String
  # output is token
  USER_EMAIL_SIGN_IN(email: String!, password: String!): String!
  # output is token
  USER_START_PHONE_VERIFICATION(phoneNumber: String!, withWhatsApp: Boolean): Boolean
}
